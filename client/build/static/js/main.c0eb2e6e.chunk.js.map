{"version":3,"sources":["components/Header.tsx","statics/actions.ts","store/actions/index.ts","statics/index.ts","pages/Books/components/CreateUpdateModal.tsx","pages/Books/components/AdjustStockModal.tsx","pages/Books/Books.tsx","statics/appRoutes.ts","components/TabLayout.tsx","App.tsx","statics/links.ts","store/sagas/requests.ts","store/sagas/handlers.ts","store/sagas/index.ts","store/reducers/index.ts","store/store.ts","index.tsx"],"names":["Header","className","level","actions","getBooks","name","lowStockWarning","type","payload","updateBook","bookId","book","categories","gstTaxRates","Option","Select","CreateUpdateModal","open","setOpen","setBook","imgRef","useRef","imgUploaderRef","dispatch","useDispatch","useState","setLowStockWarning","books","useSelector","state","file","setFile","fileName","setFileName","validateRequest","message","error","content","duration","stock","price","bookName","bookCode","category","createBookHandle","formData","FormData","append","Object","entries","forEach","key","value","createBook","clearModal","useEffect","resetVariables","gstTaxRate","gstInclusive","current","src","width","destroyOnClose","title","onCancel","onOk","visible","footer","onClick","_id","updateBookHandle","bookData","data","filter","obj","resetBook","alt","ref","image","style","display","onChange","event","target","files","reader","FileReader","onload","e","result","readAsDataURL","accept","click","placeholder","prev","parseInt","description","map","required","moment","format","checked","prefix","taxRate","AdjustStockModal","adjustedStock","setAdjustedStock","addStock","setAddStock","finalStock","Group","Number","isInteger","Books","searchBook","setSearchBook","showUpdateModal","setShowUpdateModal","showCreateModal","setShowCreateModal","lowStockWarningFilter","setLowStockWarningFilter","adjustStockModal","setAdjustStockModal","selectedRows","setSelectedRows","rowSelection","selectedRowKeys","deleteRecords","bookIds","row","deleteBooks","columns","dataIndex","render","Empty","PRESENTED_IMAGE_SIMPLE","sorter","compare","a","b","WarningOutlined","shape","icon","EditOutlined","_","onSubmit","preventDefault","disabled","length","overflowX","dataSource","loading","size","pagination","position","pageSize","rowKey","appRoutes","TabPane","Tabs","withRouter","props","defaultActiveKey","window","location","pathname","centered","history","push","tab","App","path","exact","component","links","createBookService","axios","post","deleteBooksService","delete","getBooksService","get","updateBookService","put","getBooksHandle","deleteBooksHandle","action","call","response","success","console","log","watcherSaga","all","takeLatest","allReducers","combineReducers","updatedBook","split","i","sagaMiddleware","createSagaMiddleware","enhancer","compose","applyMiddleware","store","createStore","run","createBrowserHistory","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.c0eb2e6e.chunk.js","sourcesContent":["import Title from 'antd/lib/typography/Title'\r\nimport React from 'react'\r\n\r\nconst Header: React.FC = () => {\r\n  return (\r\n    <>\r\n      <header className='sticky top-0 z-50 bg-blue-300 h-16 flex items-center'>\r\n        <Title level={4} className='mx-8 '>\r\n          Book Inventory\r\n        </Title>\r\n      </header>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","export const actions = {\r\n  CREATE_BOOK: 'CREATE_BOOK',\r\n  CREATE_BOOK_SUCCESS: 'CREATE_BOOK_SUCCESS',\r\n\r\n  DELETE_BOOKS: 'DELETE_BOOKS',\r\n  DELETE_BOOKS_SUCCESS: 'DELETE_BOOKS_SUCCESS',\r\n\r\n  UPDATE_BOOK: 'UPDATE_BOOK',\r\n  UPDATE_BOOK_SUCCESS: 'UPDATE_BOOK_SUCCESS',\r\n\r\n  GET_BOOKS: 'GET_BOOKS',\r\n  GET_BOOKS_SUCCESS: 'GET_BOOKS_SUCCESS',\r\n}\r\n","import IBook from '../../interfaces/IBook'\r\nimport { actions } from '../../statics/actions'\r\n\r\nexport const createBook = (book: FormData) => {\r\n  return {\r\n    type: actions.CREATE_BOOK,\r\n    payload: book,\r\n  }\r\n}\r\n\r\nexport const createBookSuccess = (book: IBook) => {\r\n  return {\r\n    type: actions.CREATE_BOOK_SUCCESS,\r\n    payload: book,\r\n  }\r\n}\r\n\r\nexport const getBooks = ({ name, lowStockWarning }: { name: string; lowStockWarning: boolean }) => {\r\n  return {\r\n    type: actions.GET_BOOKS,\r\n    payload: { name, lowStockWarning },\r\n  }\r\n}\r\n\r\nexport const getBooksSuccess = (books: Array<IBook>) => {\r\n  return {\r\n    type: actions.GET_BOOKS_SUCCESS,\r\n    payload: books,\r\n  }\r\n}\r\n\r\nexport const updateBook = ({ bookId, book }: { bookId: string; book: FormData }) => {\r\n  return {\r\n    type: actions.UPDATE_BOOK,\r\n    payload: { bookId, book },\r\n  }\r\n}\r\n\r\nexport const updateBookSuccess = (book: IBook) => {\r\n  return {\r\n    type: actions.UPDATE_BOOK_SUCCESS,\r\n    payload: book,\r\n  }\r\n}\r\n\r\nexport const deleteBooks = (bookIds: string) => {\r\n  return {\r\n    type: actions.DELETE_BOOKS,\r\n    payload: bookIds,\r\n  }\r\n}\r\nexport const deleteBooksSuccess = (bookId: string) => {\r\n  return {\r\n    type: actions.DELETE_BOOKS_SUCCESS,\r\n    payload: bookId,\r\n  }\r\n}\r\n","export const categories = ['Fantasy', 'Sci-Fi', 'Mystery', 'Thriller', 'Romance']\r\nexport const gstTaxRates = [0, 1, 0.25, 3, 5, 12]\r\n","import { Button, Card, DatePicker, Input, message, Modal, Select, Switch, Typography } from 'antd'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport IBook from '../../../interfaces/IBook'\r\nimport { categories, gstTaxRates } from '../../../statics'\r\nimport { createBook, updateBook } from '../../../store/actions'\r\nimport moment from 'moment'\r\nimport { AppState } from '../../../store/reducers'\r\nconst { Option } = Select\r\n\r\ninterface PropTypes {\r\n  book: IBook\r\n  setBook: Function\r\n  open: boolean\r\n  setOpen: Function\r\n  type: 'edit' | 'create'\r\n}\r\n\r\nconst CreateUpdateModal: React.FC<PropTypes> = ({ open, setOpen, setBook, book, type }) => {\r\n  const imgRef = useRef<HTMLImageElement>(null)\r\n  const imgUploaderRef = useRef<HTMLInputElement>(null)\r\n  const dispatch = useDispatch()\r\n  const [lowStockWarning, setLowStockWarning] = useState(false)\r\n  const books = useSelector((state: AppState) => state.books)\r\n  const [file, setFile] = useState<any>()\r\n  const [fileName, setFileName] = useState('')\r\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      setFile(event.target.files[0])\r\n      setFileName(event.target.files[0].name)\r\n      var reader = new FileReader()\r\n      reader.onload = function (e) {\r\n        if (imgRef.current && e.target) {\r\n          imgRef.current.src = e.target.result as string\r\n        }\r\n      }\r\n      reader.readAsDataURL(event.target.files[0])\r\n    }\r\n  }\r\n\r\n  const validateRequest = () => {\r\n    if (lowStockWarning && !book.lowStockWarning) {\r\n      message.error({ content: 'Please enter low stock units', duration: 2 })\r\n      return false\r\n    } else if (type === 'create' && book.lowStockWarning > book.stock) {\r\n      message.error({ content: 'Low stock warning cannot be higher than stock', duration: 2 })\r\n      return false\r\n    } else if (!book.stock) {\r\n      message.error({ content: 'Please enter opening stock', duration: 2 })\r\n      return false\r\n    } else if (book.stock <= 0) {\r\n      message.error({ content: 'Opening stock has to be more than 0', duration: 2 })\r\n      return false\r\n    } else if (!book.price) {\r\n      message.error({ content: 'Please enter price', duration: 2 })\r\n      return false\r\n    } else if (book.price <= 0) {\r\n      message.error({ content: 'Price has to be more than 0', duration: 2 })\r\n      return false\r\n    } else if (!book.bookName) {\r\n      message.error({ content: 'Please enter book name', duration: 2 })\r\n      return false\r\n    } else if (!book.bookCode) {\r\n      message.error({ content: 'Please enter book code', duration: 2 })\r\n      return false\r\n    } else if (!book.category) {\r\n      message.error({ content: 'Please enter book category', duration: 2 })\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  const createBookHandle = () => {\r\n    if (!validateRequest()) return\r\n    const formData = new FormData()\r\n    if (file) formData.append('file', file)\r\n    Object.entries(book).forEach(book => {\r\n      var [key, value] = book\r\n      formData.append(key, value)\r\n    })\r\n    dispatch(createBook(formData))\r\n    clearModal()\r\n  }\r\n  const updateBookHandle = () => {\r\n    if (!validateRequest()) return\r\n    const formData = new FormData()\r\n    if (file) formData.append('file', file)\r\n    Object.entries(book).forEach(book => {\r\n      var [key, value] = book\r\n      formData.append(key, value)\r\n    })\r\n    dispatch(updateBook({ bookId: book._id ? book._id : '', book: formData }))\r\n    clearModal()\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (type === 'edit' && book.lowStockWarning) setLowStockWarning(true)\r\n  }, [book, type])\r\n\r\n  const clearModal = () => {\r\n    resetVariables()\r\n    setOpen(false)\r\n  }\r\n\r\n  const resetVariables = () => {\r\n    setBook({ gstTaxRate: 0, lowStockWarning: 0, gstInclusive: false } as IBook)\r\n    setLowStockWarning(false)\r\n    setFile(null)\r\n    setFileName('')\r\n    if (imgRef.current) imgRef.current.src = ''\r\n  }\r\n\r\n  const resetBook = () => {\r\n    var bookData = books.data.filter((obj: IBook) => obj._id === book._id)[0]\r\n    setBook(bookData)\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      width={1080}\r\n      destroyOnClose={true}\r\n      title={type === 'edit' ? `Edit book ${book.bookName}` : 'Create Book'}\r\n      onCancel={() => clearModal()}\r\n      onOk={() => clearModal()}\r\n      visible={open}\r\n      footer={\r\n        <>\r\n          <Button\r\n            type='primary'\r\n            onClick={() => {\r\n              if (type === 'edit') updateBookHandle()\r\n              else createBookHandle()\r\n            }}\r\n          >\r\n            Save\r\n          </Button>\r\n          <Button\r\n            type='dashed'\r\n            onClick={() => {\r\n              if (type === 'create') resetVariables()\r\n              else resetBook()\r\n            }}\r\n          >\r\n            Reset\r\n          </Button>\r\n        </>\r\n      }\r\n    >\r\n      <div className='h-116 sm:h-112 lg:h-104 w-full grid grid-cols-1 lg:grid-cols-2'>\r\n        <Card className='m-2' title='General details'>\r\n          <Typography className='mx-2 text-gray-400'>Upload Book Image:</Typography>\r\n          <img\r\n            alt=''\r\n            className='m-2 w-48 h-48'\r\n            ref={imgRef}\r\n            src={book.image && type === 'edit' ? book.image : ''}\r\n            style={{ display: book.image || file ? 'block' : 'none' }}\r\n          />\r\n          <input\r\n            ref={imgUploaderRef}\r\n            onChange={handleImageUpload}\r\n            type='file'\r\n            accept='image/*'\r\n            style={{ display: 'none' }}\r\n          />\r\n          {fileName && <Typography className='m-2'>{fileName}</Typography>}\r\n          <Button className='m-2' onClick={() => imgUploaderRef.current?.click()}>\r\n            Upload Image\r\n          </Button>\r\n          <div className='grid items-center grid-cols-3'>\r\n            <Typography className='m-2 col-span-3 sm:col-span-1'>Book Name:</Typography>\r\n            <Input\r\n              className='m-2 col-span-2'\r\n              placeholder='Book name'\r\n              value={book.bookName}\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                setBook((prev: IBook) => {\r\n                  return { ...prev, bookName: e.target.value }\r\n                })\r\n              }\r\n            />\r\n            <Typography className='m-2 col-span-3 sm:col-span-1'>Book Code:</Typography>\r\n            <Input\r\n              className='m-2 col-span-2'\r\n              placeholder='Book code'\r\n              type='number'\r\n              value={book.bookCode}\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                setBook((prev: IBook) => {\r\n                  return { ...prev, bookCode: parseInt(e.target.value) }\r\n                })\r\n              }\r\n            />\r\n            <Typography className='m-2 col-span-3 sm:col-span-1'>Book Description:</Typography>\r\n            <Input\r\n              className='m-2 col-span-2'\r\n              placeholder='Book description'\r\n              value={book.description}\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                setBook((prev: IBook) => {\r\n                  return { ...prev, description: e.target.value }\r\n                })\r\n              }\r\n            />\r\n            <Typography className='m-2 col-span-3 sm:col-span-1'>Book Category:</Typography>\r\n            <Select\r\n              className='m-2 col-span-2'\r\n              style={{ width: 200 }}\r\n              placeholder='Category'\r\n              value={book.category}\r\n              onChange={(value: any) => {\r\n                setBook((prev: IBook) => {\r\n                  return { ...prev, category: value }\r\n                })\r\n              }}\r\n            >\r\n              {categories.map(category => (\r\n                <Option value={category}>{category}</Option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n        </Card>\r\n        <div>\r\n          <Card className='m-2' title='Stock details'>\r\n            <div className='grid items-center grid-cols-3'>\r\n              <Typography className='m-2 col-span-3 sm:col-span-1'>Opening stock:</Typography>\r\n              <Input\r\n                required\r\n                className='m-2 col-span-2'\r\n                placeholder='Quantity'\r\n                type='number'\r\n                value={book.stock}\r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                  setBook((prev: IBook) => {\r\n                    return { ...prev, stock: parseInt(e.target.value) }\r\n                  })\r\n                }\r\n              />\r\n              <Typography className='m-2 col-span-3 sm:col-span-1'>As of date:</Typography>\r\n              <DatePicker className='m-2 col-span-2' value={moment()} format='MM/DD/YYYY' placeholder='As of Date' />\r\n              <Typography className='m-2 col-span-3 sm:col-span-1'>Low stock warning:</Typography>\r\n              <div className='col-span-2'>\r\n                <Switch\r\n                  className='m-2'\r\n                  checked={book.lowStockWarning > 0 ? true : lowStockWarning}\r\n                  title='Enable low stock warning'\r\n                  onChange={(value: boolean) => {\r\n                    setLowStockWarning(value)\r\n                    if (!value)\r\n                      setBook((prev: IBook) => {\r\n                        return { ...prev, lowStockWarning: 0 }\r\n                      })\r\n                  }}\r\n                />\r\n              </div>\r\n              {lowStockWarning && (\r\n                <>\r\n                  <Typography className='m-2 col-span-3 sm:col-span-1 align-baseline'>Low stock units:</Typography>\r\n                  <Input\r\n                    className='m-2 col-span-2'\r\n                    placeholder='Low stock units'\r\n                    type='number'\r\n                    value={book.lowStockWarning}\r\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n                      setBook((prev: IBook) => {\r\n                        return { ...prev, lowStockWarning: parseInt(e.target.value) }\r\n                      })\r\n                    }}\r\n                  />\r\n                </>\r\n              )}\r\n            </div>\r\n          </Card>\r\n          <Card className='m-2' title='Pricing details'>\r\n            <div className='grid items-center grid-cols-3'>\r\n              <Typography className='m-2 col-span-3 sm:col-span-1'>Purchase price:</Typography>\r\n              <Input\r\n                className='m-2 col-span-2'\r\n                prefix={<span>&#8377;</span>}\r\n                placeholder='Price'\r\n                type='number'\r\n                value={book.price}\r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                  setBook((prev: IBook) => {\r\n                    return { ...prev, price: parseInt(e.target.value) }\r\n                  })\r\n                }\r\n              />\r\n              <Typography className='mx-2 col-span-3 sm:col-span-1'>Inclusive of tax:</Typography>\r\n              <div className='col-span-2'>\r\n                <Switch\r\n                  className='m-2'\r\n                  checked={book.gstInclusive}\r\n                  title='Inclusive of tax'\r\n                  onChange={(value: boolean) =>\r\n                    setBook((prev: IBook) => {\r\n                      return { ...prev, gstInclusive: value }\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n              <Typography className='mx-2 col-span-3 sm:col-span-1'>GST tax rate (%):</Typography>\r\n              <Select\r\n                className='m-2 col-span-2'\r\n                value={book.gstTaxRate != null ? `GST @ ${book.gstTaxRate}%` : ''}\r\n                placeholder='GST tax rate (%)'\r\n                onChange={(value: string) =>\r\n                  setBook((prev: IBook) => {\r\n                    return { ...prev, gstTaxRate: value }\r\n                  })\r\n                }\r\n              >\r\n                {gstTaxRates.map(taxRate => (\r\n                  <Option value={taxRate}>{taxRate === 0 ? 'None' : `GST @ ${taxRate}%`}</Option>\r\n                ))}\r\n              </Select>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CreateUpdateModal\r\n","import { Button, Input, message, Modal, Radio, RadioChangeEvent, Typography } from 'antd'\r\nimport React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport IBook from '../../../interfaces/IBook'\r\nimport { updateBook } from '../../../store/actions'\r\n\r\ninterface PropTypes {\r\n  open: boolean\r\n  setOpen: Function\r\n  book: IBook\r\n  setBook: Function\r\n}\r\nconst AdjustStockModal: React.FC<PropTypes> = ({ open, setOpen, book, setBook }) => {\r\n  const dispatch = useDispatch()\r\n  const [adjustedStock, setAdjustedStock] = useState(0)\r\n  const [addStock, setAddStock] = useState(true)\r\n  const clearModal = () => {\r\n    setAdjustedStock(0)\r\n    setAddStock(true)\r\n    setBook({ gstTaxRate: 0, lowStockWarning: 0, gstInclusive: false } as IBook)\r\n    setOpen(false)\r\n  }\r\n  return (\r\n    <Modal\r\n      title='Adjust Stock Quantity'\r\n      visible={open}\r\n      onCancel={() => clearModal()}\r\n      destroyOnClose={true}\r\n      onOk={() => setOpen(false)}\r\n      footer={\r\n        <>\r\n          <Button type='dashed' onClick={() => clearModal()}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            type='primary'\r\n            onClick={() => {\r\n              var finalStock = addStock ? ((book.stock + adjustedStock) as any) : ((book.stock - adjustedStock) as any)\r\n              if (finalStock < 0) {\r\n                message.error({ content: \"You don't have enough stock\", duration: 2 })\r\n                return\r\n              }\r\n              const formData = new FormData()\r\n              formData.append('stock', finalStock)\r\n              dispatch(\r\n                updateBook({\r\n                  bookId: book._id,\r\n                  book: formData,\r\n                })\r\n              )\r\n              clearModal()\r\n            }}\r\n          >\r\n            Save\r\n          </Button>\r\n        </>\r\n      }\r\n    >\r\n      <div className='flex flex-col justify-center items-start'>\r\n        <div className='grid items-center grid-cols-2 gap-4'>\r\n          <Typography className='col-span-1 font-semibold'>Book Name:</Typography>\r\n          <Typography className='col-span-1'>{book.bookName}</Typography>\r\n          <Typography className='col-span-1 font-semibold'>Current Stock:</Typography>\r\n          <Typography className='col-span-1'>{book.stock}</Typography>\r\n        </div>\r\n        <Typography className='text-gray-400 my-4'>Add or Reduce stock</Typography>\r\n        <Radio.Group\r\n          onChange={(e: RadioChangeEvent) => {\r\n            setAddStock(e.target.value)\r\n          }}\r\n          value={addStock}\r\n        >\r\n          <Radio value={true}>Add (+)</Radio>\r\n          <Radio value={false}>Reduce (+)</Radio>\r\n        </Radio.Group>\r\n        <Input\r\n          className='my-4'\r\n          placeholder='Adjust stock'\r\n          value={adjustedStock}\r\n          type='number'\r\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setAdjustedStock(parseInt(e.target.value))}\r\n        />\r\n        <div className='grid items-center grid-cols-2 gap-4'>\r\n          <Typography className='font-semibold col-span-1'>Final Stock:</Typography>\r\n          <Typography className='col-span-1'>\r\n            {!Number.isInteger(adjustedStock)\r\n              ? book.stock\r\n              : addStock\r\n              ? book.stock + adjustedStock\r\n              : book.stock - adjustedStock}\r\n          </Typography>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default AdjustStockModal\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Table, Typography, Button, Input, Empty, Tooltip } from 'antd'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { deleteBooks, getBooks } from '../../store/actions'\r\nimport { AppState } from '../../store/reducers'\r\nimport IBook from '../../interfaces/IBook'\r\nimport CreateUpdateModal from './components/CreateUpdateModal'\r\nimport { EditOutlined, WarningOutlined } from '@ant-design/icons'\r\nimport AdjustStockModal from './components/AdjustStockModal'\r\n\r\nconst Books: React.FC = () => {\r\n  const [searchBook, setSearchBook] = useState('')\r\n  const [book, setBook] = useState({ gstTaxRate: 0, lowStockWarning: 0, gstInclusive: false } as IBook)\r\n  const [showUpdateModal, setShowUpdateModal] = useState(false)\r\n  const [showCreateModal, setShowCreateModal] = useState(false)\r\n  const [lowStockWarningFilter, setLowStockWarningFilter] = useState(false)\r\n  const [adjustStockModal, setAdjustStockModal] = useState(false)\r\n  const [selectedRows, setSelectedRows] = useState([] as string[])\r\n  const books = useSelector((state: AppState) => state.books)\r\n  const dispatch = useDispatch()\r\n\r\n  const rowSelection = {\r\n    onChange: (selectedRowKeys: any[]) => {\r\n      setSelectedRows(selectedRowKeys)\r\n    },\r\n  }\r\n\r\n  const deleteRecords = () => {\r\n    var bookIds = ''\r\n    selectedRows.forEach(row => (bookIds += `${row},`))\r\n    dispatch(deleteBooks(bookIds))\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      dataIndex: 'image',\r\n      render: (image: string) => {\r\n        return image ? (\r\n          <img alt='' className='mx-auto' width={100} src={image} />\r\n        ) : (\r\n          <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description='' />\r\n        )\r\n      },\r\n    },\r\n    {\r\n      dataIndex: 'bookCode',\r\n      sorter: {\r\n        compare: (a: IBook, b: IBook) => a.bookCode - b.bookCode,\r\n      },\r\n      title: 'Book Code',\r\n    },\r\n    {\r\n      dataIndex: 'bookName',\r\n      // sorter: (a: IBook, b: IBook) => a.bookName - b.bookName,\r\n      title: 'Book Name',\r\n      render: (bookName: string) => {\r\n        return <Typography>{bookName ? bookName : ' - '}</Typography>\r\n      },\r\n    },\r\n    {\r\n      dataIndex: 'category',\r\n      // sorter: (a: IBook, b: IBook) => a.bookName - b.bookName,\r\n      title: 'Category',\r\n    },\r\n    {\r\n      dataIndex: 'stock',\r\n      sorter: (a: IBook, b: IBook) => a.stock - b.stock,\r\n      title: 'Stock Quantity',\r\n      render: (stock: number, data: IBook) => {\r\n        return (\r\n          <Typography className='my-0'>\r\n            {data.stock <= data.lowStockWarning ? (\r\n              <div className='flex items-center'>\r\n                <Tooltip title='Low stock warning'>\r\n                  <WarningOutlined className='mx-2 text-yellow-500' />\r\n                </Tooltip>\r\n                <Typography className='my-0'>{stock}</Typography>\r\n              </div>\r\n            ) : (\r\n              <Typography className='my-0'>{stock}</Typography>\r\n            )}\r\n          </Typography>\r\n        )\r\n      },\r\n    },\r\n    {\r\n      dataIndex: 'stock',\r\n      title: 'Stock Value',\r\n      sorter: (a: IBook, b: IBook) => a.stock * a.price - b.stock * b.price,\r\n      render: (stock: number, data: IBook) => {\r\n        return <Typography className='my-0'>&#8377;{stock * data.price}</Typography>\r\n      },\r\n    },\r\n    {\r\n      dataIndex: 'price',\r\n      sorter: (a: IBook, b: IBook) => a.price - b.price,\r\n      title: 'Price',\r\n      render: (price: number, data: IBook) => {\r\n        return (\r\n          <Typography className='my-0'>\r\n            &#8377;{data.gstInclusive ? price : price + (price * data.gstTaxRate) / 100}\r\n          </Typography>\r\n        )\r\n      },\r\n    },\r\n    {\r\n      dataIndex: '_id',\r\n      title: 'Edit',\r\n      render: (_id: string, data: IBook) => {\r\n        return (\r\n          <Button\r\n            shape='circle'\r\n            onClick={() => {\r\n              setBook(data)\r\n              setShowUpdateModal(true)\r\n            }}\r\n            icon={<EditOutlined />}\r\n          />\r\n        )\r\n      },\r\n    },\r\n    {\r\n      dataIndex: 'data',\r\n      title: 'Actions',\r\n      render: (_: any, data: IBook) => {\r\n        return (\r\n          <Button\r\n            onClick={() => {\r\n              setBook(data)\r\n              setAdjustStockModal(true)\r\n            }}\r\n          >\r\n            Adjust Stock\r\n          </Button>\r\n        )\r\n      },\r\n    },\r\n  ]\r\n\r\n  useEffect(() => {\r\n    dispatch(getBooks({ name: searchBook, lowStockWarning: lowStockWarningFilter }))\r\n  }, [dispatch, lowStockWarningFilter])\r\n\r\n  return (\r\n    <>\r\n      <CreateUpdateModal\r\n        type='create'\r\n        book={book}\r\n        setBook={setBook}\r\n        open={showCreateModal}\r\n        setOpen={setShowCreateModal}\r\n      />\r\n      <CreateUpdateModal\r\n        type='edit'\r\n        book={book}\r\n        setBook={setBook}\r\n        open={showUpdateModal}\r\n        setOpen={setShowUpdateModal}\r\n      />\r\n      <AdjustStockModal open={adjustStockModal} setOpen={setAdjustStockModal} book={book} setBook={setBook} />\r\n      <form\r\n        onSubmit={(e: React.FormEvent) => {\r\n          e.preventDefault()\r\n          dispatch(getBooks({ name: searchBook, lowStockWarning: lowStockWarningFilter }))\r\n        }}\r\n        className='d-flex flex-row mt-4'\r\n      >\r\n        <Input\r\n          placeholder='Search books by name'\r\n          className='my-2 mr-2 w-1/2'\r\n          value={searchBook}\r\n          onChange={e => setSearchBook(e.target.value)}\r\n        />\r\n        <Button\r\n          onClick={() => dispatch(getBooks({ name: searchBook, lowStockWarning: lowStockWarningFilter }))}\r\n          className='mx-2'\r\n          icon={<i className='fa fa-search mr-2' />}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          icon={lowStockWarningFilter ? <i className='fa fa-times mr-2' /> : <></>}\r\n          onClick={() => setLowStockWarningFilter(!lowStockWarningFilter)}\r\n          className='mx-2'\r\n        >\r\n          Show Low Stock\r\n        </Button>\r\n        <Button\r\n          disabled={selectedRows.length === 0}\r\n          onClick={() => deleteRecords()}\r\n          type='default'\r\n          className='mx-2'\r\n          icon={<i className='fa fa-trash mr-2 text-red' />}\r\n        >\r\n          Delete Selected\r\n        </Button>\r\n        <Button\r\n          type='primary'\r\n          onClick={() => setShowCreateModal(true)}\r\n          className='m-2'\r\n          icon={<i className='fa fa-plus mr-2' />}\r\n        >\r\n          Add to Inventory\r\n        </Button>\r\n      </form>\r\n      <div className='pb-5'>\r\n        <Table\r\n          rowSelection={{\r\n            type: 'checkbox',\r\n            ...rowSelection,\r\n          }}\r\n          style={{ overflowX: 'scroll' }}\r\n          columns={columns}\r\n          dataSource={books.data}\r\n          loading={books.loading}\r\n          size='large'\r\n          footer={() => <div className='text-right'>{books.data?.length || 0} books</div>}\r\n          pagination={{ position: ['bottomCenter'], pageSize: 5 }}\r\n          rowKey='_id'\r\n        />\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Books\r\n","export const appRoutes = {\r\n  booksPage: '/books',\r\n}\r\n","import { Tabs } from 'antd'\r\nimport React from 'react'\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom'\r\nimport { appRoutes } from '../statics/appRoutes'\r\nconst { TabPane } = Tabs\r\n\r\nconst TabLayout: React.FC<RouteComponentProps> = props => {\r\n  const handleTabClick = (key: string) => {\r\n    props.history.push(key)\r\n  }\r\n  return (\r\n    <Tabs defaultActiveKey={window.location.pathname} centered onChange={handleTabClick}>\r\n      <TabPane tab='Home' key='/'></TabPane>\r\n      <TabPane tab='Books' key={appRoutes.booksPage}></TabPane>\r\n      <TabPane tab='Expenses' disabled key='3'></TabPane>\r\n    </Tabs>\r\n  )\r\n}\r\n\r\nexport default withRouter(TabLayout)\r\n","import React from 'react'\nimport Header from './components/Header'\nimport { Switch, Route } from 'react-router-dom'\nimport Books from './pages/Books/Books'\nimport { appRoutes } from './statics/appRoutes'\nimport TabLayout from './components/TabLayout'\n\nfunction App() {\n  return (\n    <div className='App'>\n      <Header />\n      <TabLayout />\n      <div className='container mx-auto'>\n        <Switch>\n          <Route path={appRoutes.booksPage} exact component={Books} />\n        </Switch>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","export const links = {\r\n  books: '/api/books',\r\n}\r\n","import axios from 'axios'\r\nimport IBook from '../../interfaces/IBook'\r\nimport { links } from '../../statics/links'\r\n\r\nexport const createBookService = (book: IBook) => {\r\n  return axios.post(`${links.books}`, book)\r\n}\r\nexport const deleteBooksService = (bookIds: string) => {\r\n  return axios.delete(`${links.books}?bookIds=${bookIds}`)\r\n}\r\nexport const getBooksService = ({ name, lowStockWarning }: { name: string; lowStockWarning: boolean }) => {\r\n  return axios.get(`${links.books}?name=${name}&showLowStock=${lowStockWarning}`)\r\n}\r\nexport const updateBookService = ({ bookId, book }: { bookId: string; book: IBook }) => {\r\n  return axios.put(`${links.books}/${bookId}`, book)\r\n}\r\n","import { deleteBooksSuccess, getBooksSuccess, updateBookSuccess } from './../actions/index'\r\nimport { call, put } from 'redux-saga/effects'\r\nimport { SagaIterator } from 'redux-saga'\r\nimport { createBookSuccess } from '../actions'\r\nimport { createBookService, deleteBooksService, getBooksService, updateBookService } from './requests'\r\nimport { message } from 'antd'\r\nimport IResponse from '../../interfaces/IResponse'\r\nimport IAction from '../../interfaces/IAction'\r\n\r\nexport function* createBookHandle(action: IAction): SagaIterator {\r\n  try {\r\n    const response: IResponse = yield call(createBookService, action.payload)\r\n    message.success({ content: `Created book '${response.data.data.bookName}'`, duration: 2 })\r\n    yield put(createBookSuccess(response.data.data))\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\nexport function* updateBookHandle(action: IAction): SagaIterator {\r\n  try {\r\n    const response: IResponse = yield call(updateBookService, action.payload)\r\n    message.success({ content: 'Updated book successfully', duration: 2 })\r\n    yield put(updateBookSuccess(response.data.data))\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\nexport function* getBooksHandle(action: IAction): SagaIterator {\r\n  try {\r\n    const response: IResponse = yield call(getBooksService, action.payload)\r\n    yield put(getBooksSuccess(response.data.data))\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\nexport function* deleteBooksHandle(action: IAction): SagaIterator {\r\n  try {\r\n    const response: IResponse = yield call(deleteBooksService, action.payload)\r\n    message.success({ content: 'Deleted books successfully', duration: 2 })\r\n    yield put(deleteBooksSuccess(action.payload))\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n","import { SagaIterator } from 'redux-saga'\r\nimport { takeLatest, all } from 'redux-saga/effects'\r\nimport { actions } from '../../statics/actions'\r\nimport { createBookHandle, deleteBooksHandle, getBooksHandle, updateBookHandle } from './handlers'\r\n\r\nexport function* watcherSaga(): SagaIterator {\r\n  yield all([\r\n    yield takeLatest(actions.CREATE_BOOK, createBookHandle),\r\n    yield takeLatest(actions.GET_BOOKS, getBooksHandle),\r\n    yield takeLatest(actions.UPDATE_BOOK, updateBookHandle),\r\n    yield takeLatest(actions.DELETE_BOOKS, deleteBooksHandle),\r\n  ])\r\n}\r\n","import { actions } from '../../statics/actions'\r\nimport { combineReducers } from 'redux'\r\nimport IBooks from '../../interfaces/IBooks'\r\nimport IBook from '../../interfaces/IBook'\r\nimport IAction from '../../interfaces/IAction'\r\n\r\nconst books = (state: IBooks = { loading: false, data: [] }, action: IAction) => {\r\n  switch (action.type) {\r\n    case actions.GET_BOOKS:\r\n      return { ...state, loading: true }\r\n    case actions.GET_BOOKS_SUCCESS:\r\n      return { ...state, data: action.payload, loading: false }\r\n    case actions.CREATE_BOOK:\r\n      return { ...state, loading: true }\r\n    case actions.CREATE_BOOK_SUCCESS:\r\n      return { ...state, data: [...state.data, action.payload], loading: false }\r\n    case actions.UPDATE_BOOK:\r\n      return { ...state, loading: true }\r\n    case actions.UPDATE_BOOK_SUCCESS:\r\n      var bookId: string = action.payload._id\r\n      var updatedBook: IBook = action.payload\r\n      return {\r\n        ...state,\r\n        data: state.data.map(book => (book._id === bookId ? (book = updatedBook) : book)),\r\n        loading: false,\r\n      }\r\n    case actions.DELETE_BOOKS:\r\n      return { ...state, loading: true }\r\n    case actions.DELETE_BOOKS_SUCCESS:\r\n      var bookIds = action.payload.split(',').filter((bookId: string) => bookId !== '')\r\n      for (var i in bookIds) {\r\n        state = { ...state, data: state.data.filter(book => book._id !== bookIds[i]), loading: false }\r\n      }\r\n      return state\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst allReducers = combineReducers({\r\n  books,\r\n})\r\n\r\nexport default allReducers\r\n\r\nexport type AppState = ReturnType<typeof allReducers>\r\n","import { applyMiddleware, compose, createStore } from 'redux'\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport { watcherSaga } from './sagas'\r\nimport allReducers from '../store/reducers'\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose | any\r\n  }\r\n}\r\n\r\nconst sagaMiddleware = createSagaMiddleware()\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window['__REDUX_DEVTOOLS_EXTENSION_COMPOSE__']\r\n    ? window['__REDUX_DEVTOOLS_EXTENSION_COMPOSE__']({})\r\n    : compose\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(sagaMiddleware))\r\n\r\nconst store = createStore(allReducers, enhancer)\r\n\r\nsagaMiddleware.run(watcherSaga)\r\n\r\nexport default store\r\n","import 'antd/dist/antd.css'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Provider } from 'react-redux'\nimport { createBrowserHistory } from 'history'\nimport { Router } from 'react-router-dom'\nimport store from './store/store'\n\nlet history = createBrowserHistory()\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router history={history}>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}